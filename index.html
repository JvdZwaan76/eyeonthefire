<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eye on the Fire - Premier Interactive Fire Map & Live Updates</title>
  <meta name="description" content="Eye on the Fire is your premier destination to monitor active wildfires near you with our interactive live map. Get real-time updates, safety tips, and community insights instantly.">
  <meta name="keywords" content="interactive fire map, live wildfire updates, fires near me, real-time fire monitoring, fire safety, Eye on the Fire">
  <meta name="author" content="Eye on the Fire Team">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://eyeonthefire.com/">
  <meta property="og:title" content="Eye on the Fire - Premier Interactive Fire Map">
  <meta property="og:description" content="Monitor active wildfires near you with Eye on the Fireâ€™s interactive live map. Stay updated with real-time fire data and safety resources.">
  <meta property="og:url" content="https://eyeonthefire.com/">
  <meta property="og:image" content="/images/hero-bg.jpg">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">

  <link rel="shortcut icon" href="/favicon/favicon.ico" type="image/x-icon">
  <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96">
  <link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png" sizes="180x180">
  <meta name="apple-mobile-web-app-title" content="eyeonthefire">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-T8RE6KDBEW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-T8RE6KDBEW'); // TODO: Replace with your GA ID
  </script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.fullscreen/2.0.0/Control.FullScreen.min.css" integrity="sha512-DRkMa+fn898M1uc6s9JZeztUoXN6viuHsXmh/pgz3jG6a77YWO3U3QYEjLoqbxOeclc2NunWfMTya4Y5twXAKA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Open+Sans:wght@300;400&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/styles.css"> </head>
<body>

  <nav class="navbar">
    <div class="navbar-header">
        <a href="#" class="logo">
            <img src="/images/fire-icon.png" alt="Eye on the Fire Logo"> <span class="logo-text">Eye on the Fire</span>
        </a>
        <button class="hamburger" id="hamburger-menu" aria-label="Toggle Menu">
            <span class="line"></span><span class="line"></span><span class="line"></span>
        </button>
    </div>
    <ul class="nav-menu" id="nav-menu">
        <li><a href="#map-section">Live Map</a></li>
        <li><a href="/recent-fires.html">Recent Fires</a></li> <li><a href="#about">Why Us</a></li>
        <li><a href="#prevention">Prevention</a></li>
        <li><a href="#community">Community</a></li>
    </ul>
    </nav>

  <header class="hero" id="home">...</header>
  <section id="map-section" class="map-section">...</section>
  <section id="about" class="content-section">...</section>
  <section id="prevention" class="content-section">...</section>
  <section id="community" class="content-section">...</section>
  <footer>...</footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.fullscreen/2.0.0/Control.FullScreen.min.js" integrity="sha512-c6ydt5Rypa1ptlnH2U1u+JybARYppbD1qxgythCI4pJ9EOfNYEWlLBjxBX926O3tq5p4Aw5GTY68vT0FdKbG3w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
    // ========================================================================
    // !!! CRITICAL SECURITY WARNING !!!
    // API KEYS ARE CURRENTLY EXPOSED CLIENT-SIDE. MOVE SERVER-SIDE BEFORE PRODUCTION.
    // ========================================================================
    const NASA_API_KEY = 'd152217c8391eb5b0fbd242290527ae8'; // !!! MOVE SERVER-SIDE !!!
    const AIRNOW_API_KEY = '54044855-7B0C-4023-BEE4-8B3FCA172DED';   // !!! MOVE SERVER-SIDE !!!
    const OPENCAGE_API_KEY = 'a40b9e954e50458bbc09ca24e70201a1'; // !!! MOVE SERVER-SIDE !!!

    // Map Variables
    let map;
    let fireLayer = L.layerGroup(); // Uses global L from leaflet.js
    let airQualityLayer = L.layerGroup();
    let nifcLayer = L.layerGroup();
    let nwsLayer = L.layerGroup();
    let showFires = true; let showAirQuality = false; let showNIFC = true; let showNWS = true;

    // DOM Elements
    const hamburger = document.getElementById('hamburger-menu');
    const navMenu = document.getElementById('nav-menu');
    const mapLoadingMessage = document.getElementById('map-loading-message');
    const mapErrorMessage = document.getElementById('map-error-message');
    const geolocationErrorDiv = document.getElementById('geolocation-error');
    const mapWrapper = document.getElementById('map-wrapper');

    // --- Initialization & Core Functions (from user code) ---
    document.addEventListener('DOMContentLoaded', initializeMap);
    function debounce(func, wait) { /* ... */ }
    function validateMapSize() { /* ... */ }
    function initializeMap(attempt = 1) { /* ... */ }
    function setupMap(centerCoords, zoomLevel) { /* ... */ }
    const handleResize = debounce(() => { /* ... */ }, 250);
    window.addEventListener('resize', handleResize);
    function addMapControls() { /* ... */ }
    function addMapLegend() { /* ... */ } // Assumes element exists in HTML
    function refreshMap() { /* ... */ }
    function loadInitialData(lat, lon) { /* ... NOTE: Calls older loadFIRMSFires */ }

    // --- Data Loading Functions (from user code - likely needs FIRMS fixes) ---
    async function loadFIRMSFires(lat, lon) {
      // Needs bounding box and regex split fixes from previous versions
      const apiKey = NASA_API_KEY; /* ... */
      const fireIcon = L.icon({ iconUrl: '/images/fire-icon.png', /* Absolute */ /* ... */ });
      /* ... rest of older logic ... */
    }
    async function loadNIFCFires() {
      const nifcIcon = L.icon({ iconUrl: '/images/nifc-fire.png', /* Absolute */ /* ... */ });
      /* ... rest of older logic ... */
    }
    async function loadAirQuality(lat, lon) { /* ... */ }
    async function loadNWSWarnings() { /* ... */ }

    // --- Control Handlers & Helpers (from user code) ---
    hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        navMenu.classList.toggle('active');
        // Invalidate map size after menu toggle
        if (map) { setTimeout(() => { map.invalidateSize(); console.log('[Hamburger] Map size invalidated after menu toggle'); }, 100); }
    });
    navMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => { if (hamburger.classList.contains('active')) { hamburger.classList.remove('active'); navMenu.classList.remove('active'); if (map) { setTimeout(() => { map.invalidateSize(); console.log('[NavLink] Map size invalidated after menu close'); }, 100); } } });
    });
    function centerOnUserLocation() { /* ... */ }
    function zoomToCA() { /* ... */ }
    function zoomToUS() { /* ... */ }
    function toggleFireLayers() { /* ... */ }
    function toggleAirQuality() { /* ... */ }
    function toggleNWSLayer() { /* ... */ }
    async function handleZipSearch(event) { /* ... */ }
    function getAQIColor(aqi) { /* ... */ }
    function displayMapError(message) { /* ... */ }

  </script>

</body>
</html>
