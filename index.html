<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Eye on the Fire - Live US Wildfire Map | Fires Near Me Tracker</title>
    <meta name="description" content="Eye on the Fire: Track wildfires near you with our live US interactive fire map. Get real-time wildfire updates across the United States. Find fire safety guides, alerts, and emergency preparedness resources.">
    <meta name="keywords" content="wildfires near me, interactive fire map, live wildfire updates, real-time fire monitoring, fire safety, Eye on the Fire, wildfire map US, emergency preparedness, evacuation guide, California fire map, US fire map, live fire tracker, home hardening, defensible space, US fire season, wildfire safety, fire map live, current wildfires">
    <meta name="author" content="Eye on the Fire Team">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://eyeonthefire.com/">

    <meta property="og:title" content="Eye on the Fire - Live US Wildfire Map | Fires Near Me Tracker">
    <meta property="og:description" content="Monitor active wildfires across the United States with Eye on the Fire’s real-time interactive map. Get live updates, check fires near you, and find crucial safety resources.">
    <meta property="og:url" content="https://eyeonthefire.com/">
    <meta property="og:image" content="/images/hero-bg.jpg">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="shortcut icon" href="/favicon/favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96">
    <link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png" sizes="180x180">
    <link rel="manifest" href="/favicon/site.webmanifest">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T8RE6KDBEW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T8RE6KDBEW');
    </script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <link rel="stylesheet" href="styles.css">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Eye on the Fire",
      "url": "https://eyeonthefire.com/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://eyeonthefire.com/#map-section?query={search_term_string}",
        "query-input": "required name=search_term_string"
      },
       "description": "Real-time interactive wildfire map monitoring fires across the United States, live updates, and fire safety information. Track wildfires near you."
    }
    </script>
     <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Eye on the Fire - Live US Wildfire Map | Fires Near Me Tracker",
      "url": "https://eyeonthefire.com/",
      "description": "Homepage for Eye on the Fire, providing a live interactive fire map to track wildfires near you, wildfire updates, and safety resources for the United States.",
       "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://eyeonthefire.com/#home"
        }]
      },
      "mainEntity": {
         "@type": "Map",
         "name": "Live Interactive US Wildfire Map",
         "description": "Real-time map showing active wildfire locations and related data across the United States. Helps users find fires near their location.",
         "url": "https://eyeonthefire.com/#map-section"
       }
    }
    </script>

</head>
<body>

    {/* === FINAL NAVIGATION HEADER (No Logo Image) === */}
    <header class="navbar">
        <div class="navbar-container">
            <a href="#home" class="logo-link">
                 <div class="logo-container">
                    {/* Img tag removed */}
                    <span>Eye on the Fire</span>
                 </div>
            </a>
            <button class="hamburger" aria-label="Toggle navigation" aria-expanded="false">
                <span class="line line1"></span>
                <span class="line line2"></span>
                <span class="line line3"></span>
            </button>
            <nav class="nav-menu" id="main-nav">
                 <ul class="main-menu">
                    <li><a href="#home">Home</a></li>
                    <li class="has-dropdown"> <a href="#">Prepare <i class="fas fa-caret-down"></i></a>
                        <ul class="dropdown">
                             <li><strong class="sub-header"><i class="fas fa-fire"></i> Get Ready</strong></li>
                             <li><a href="#prevention" class="sub-item">Home Hardening</a></li>
                             <li><a href="#prevention" class="sub-item">Defensible Space</a></li>
                             <li><a href="#prevention" class="sub-item">Fire-Smart Landscaping</a></li>
                             <li><strong class="sub-header"><i class="fas fa-fire"></i> Get Set</strong></li>
                             <li><a href="#">Wildfire Action Plan</a></li>
                             <li><a href="#">Family Preparedness</a></li>
                             <li><a href="#">Emergency Go Bag</a></li>
                             <li><a href="#">Insurance Check-up</a></li>
                             <li><strong class="sub-header"><i class="fas fa-fire"></i> Go!</strong></li>
                             <li><a href="#">Evacuation Guide</a></li>
                        </ul>
                    </li>
                    <li class="has-dropdown">
                        <a href="#prevention">Prevent <i class="fas fa-caret-down"></i></a>
                         <ul class="dropdown">
                            <li><strong class="sub-header"><i class="fas fa-shield-alt"></i> Prevention Topics</strong></li>
                            <li><a href="#" class="sub-item">Equipment & Vehicle Use</a></li>
                            <li><a href="#" class="sub-item">Campfire Safety</a></li>
                            <li><a href="#" class="sub-item">Fireworks Safety</a></li>
                            <li><a href="#" class="sub-item">Target Shooting Safety</a></li>
                            <li><a href="#" class="sub-item">Landowner Assistance</a></li>
                         </ul>
                    </li>
                     <li class="has-dropdown">
                        <a href="#">Safety Info <i class="fas fa-caret-down"></i></a>
                        <ul class="dropdown">
                            <li><strong class="sub-header"><i class="fas fa-info-circle"></i> Safety Topics</strong></li>
                            <li><a href="#" class="sub-item">Evacuation Planning</a></li>
                            <li><a href="#prevention" class="sub-item">Prevention Tips</a></li>
                            <li><a href="#" class="sub-item">Emergency Kits</a></li>
                        </ul>
                    </li>
                    <li><a href="#community">News & Resources</a></li>
                    <li class="has-dropdown">
                        <a href="#">Contact <i class="fas fa-caret-down"></i></a>
                         <ul class="dropdown">
                             <li><strong class="sub-header"><i class="fas fa-envelope"></i> Get In Touch</strong></li>
                             <li><a href="#" class="sub-item">Contact Form</a></li>
                             <li><a href="#" class="sub-item">Advertising Inquiries</a></li>
                         </ul>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    {/* === END FINAL NAVIGATION HEADER === */}


    {/* Hero Section (Content from your file) */}
    <header class="hero" id="home">
        <div class="hero-content">
            <h1>Monitor US Wildfires in Real-Time</h1>
            <p>Track active fires across the United States with our live interactive map. Get critical updates, safety alerts, and preparedness resources.</p>
            <a href="#map-section" class="cta-button">View Live US Fire Map</a>
        </div>
    </header>

    {/* Map Section (Content and Structure from your file) */}
    <section id="map-section" class="map-section content-section">
        <div class="map-wrapper" id="map-wrapper">
            <div class="map-header">Interactive Wildfire Map</div>
            {/* This div below is likely where your map script from the original file attached */}
            <div id="fire-map">
                <div id="map-loading-message" style="position:absolute; top:50%; left:50%; transform: translate(-50%, -50%); font-size: 1.2em; color: #555; z-index: 1001;">Loading map data...</div>
                <div id="map-error-message" style="position:absolute; top:50%; left:50%; transform: translate(-50%, -50%); font-size: 1.2em; color: red; display: none; text-align:center; background: rgba(255,255,255,0.8); padding: 15px; border-radius: 5px; z-index: 1001;"></div>
            </div>
        </div>
        <div id="geolocation-error" style="text-align: center; color: #b71c1c; margin-top: 10px; display: none;">Could not get your location. Showing default view.</div>
        {/* Optional: Add back the Map Usage Guide if desired */}
        {/* <div class="container"> ... <div class="map-usage-guide">...</div> ... </div> */}
    </section>

    {/* About Section (Content from your file) */}
    <section id="about" class="content-section">
        <div class="container">
          <h2>Why Choose Eye on the Fire?</h2>
          <p>We provide the most up-to-date and comprehensive wildfire information available, combining data from multiple trusted sources like NASA and NIFC. Our easy-to-use interactive map helps you stay informed and safe.</p>
        </div>
      </section>

    {/* Prevention Section (Content from your file) */}
    <section id="prevention" class="content-section">
        <div class="container">
          <h2>Fire Prevention Tips</h2>
          <p>Protect your home and community by following these essential fire prevention practices.</p>
          <div class="prevention-grid">
            <div class="prevention-item"><h3>Clear Defensible Space</h3><p>Remove flammable vegetation, leaves, and debris from around your home (at least 30 feet).</p></div>
            <div class="prevention-item"><h3>Maintain Roof & Gutters</h3><p>Regularly clean roofs and gutters of pine needles, leaves, and other flammable materials.</p></div>
            <div class="prevention-item"><h3>Choose Fire-Resistant Landscaping</h3><p>Use native, drought-tolerant plants that are less likely to ignite easily.</p></div>
          </div>
        </div>
      </section>

    {/* Community Section (Content from your file) */}
    <section id="community" class="content-section">
        <div class="container">
            <h2>Community Resources & Updates</h2>
            <p>Stay connected with local resources and see updates from affected areas.</p>
            <div class="cta-banner"><p>Find National Interagency Fire Center (NIFC) Updates: <a href="https://www.nifc.gov/" target="_blank" rel="noopener noreferrer">Visit NIFC.gov</a></p></div>
            <div class="gallery">
                <div class="gallery-item"><img src="/images/us-wildfire-community-response.jpg" alt="Diverse group of community members clearing brush together for wildfire prevention in a US neighborhood"></div>
                <div class="gallery-item"><img src="/images/us-firefighters-working.jpg" alt="US firefighters monitoring a controlled burn or wildfire line in a forested area"></div>
                <div class="gallery-item"><img src="/images/us-wildfire-landscape-recovery.jpg" alt="Wide landscape view showing ecological recovery with green shoots emerging after a US wildfire"></div>
            </div>
        </div>
    </section>

    {/* Footer (Content from your file) */}
    <footer class="site-footer">
        <div class="container"> {/* Assuming container usage from your file */}
            <p>&copy; <span id="year">2025</span> Eye on the Fire. All Rights Reserved.</p>
            <p><a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a> | <a href="#">Contact Us</a></p>
            <div class="social-icons">
                <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
    </footer>

    {/* Scripts (Leaflet, Plugins, React, Babel, Map Logic) */}
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.fullscreen/2.0.0/Control.FullScreen.min.js" integrity="sha512-c6ydt5Rypa1ptlnH2U1u+JybARYppbD1qxgythCI4pJ9EOfNYEWlLBjxBX926O3tq5p4Aw5GTY68vT0FdKbG3w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    {/* Ensure React related scripts are included if your map uses React */}
    <script src="https://cdn.jsdelivr.net/npm/react@17/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7/babel.min.js"></script>

    {/* Your original map logic script OR the React Babel script */}
    {/* If using React: */}
    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      const fetchWithRetry = async (url, retries = 3, delay = 1000) => {
          for (let i = 0; i < retries; i++) {
              let response;
              try {
                  response = await fetch(url);
                  if (!response.ok) {
                      const errorText = await response.text();
                      throw new Error(`HTTP error ${response.status}: ${errorText || response.statusText}`);
                  }
                  return await response.json();
              } catch (error) {
                  if (i === retries - 1) throw error;
                  await new Promise(resolve => setTimeout(resolve, delay));
              }
          }
      };

      const MapComponent = () => {
          const [fires, setFires] = useState([]);
          const [center, setCenter] = useState([39.8283, -98.5795]); // Center of US
          const [zoom, setZoom] = useState(4); // Zoom for US view
          const [errorMessage, setErrorMessage] = useState('');
          const [isLoading, setIsLoading] = useState(true);
          const mapRef = useRef(null);
          const markerLayerRef = useRef(null);
          const initialCenter = [39.8283, -98.5795]; // Store initial US view
          const initialZoom = 4;
          const loadingOverlayRef = useRef(null);

          useEffect(() => {
              // Ensure the target div exists before initializing the map
              const mapElement = document.getElementById('map');
              if (!mapRef.current && mapElement) {
                  mapRef.current = L.map(mapElement, { // Target the div inside #root
                      zoomControl: true,
                      // fullscreenControl: true // Add if fullscreen plugin is active
                  }).setView(center, zoom);
                  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                      attribution: '&copy; OpenStreetMap contributors | Eye on the Fire'
                  }).addTo(mapRef.current);
                  // Check if MarkerCluster library is loaded before using
                  if (typeof L.markerClusterGroup === 'function') {
                      markerLayerRef.current = L.markerClusterGroup().addTo(mapRef.current);
                  } else {
                       console.warn('MarkerClusterGroup not available. Using LayerGroup.');
                       markerLayerRef.current = L.layerGroup().addTo(mapRef.current); // Fallback
                  }
                   mapRef.current.zoomControl.setPosition('topright');
              } else if (!mapElement) {
                  console.error("Map target element 'map' not found in DOM.");
              }
          }, []); // Dependencies array left empty to run once on mount

          useEffect(() => {
              if (mapRef.current) {
                  mapRef.current.setView(center, zoom);
              }
          }, [center, zoom]);

          useEffect(() => {
              setIsLoading(true);
              setErrorMessage('');
               if (loadingOverlayRef.current) loadingOverlayRef.current.classList.remove('hidden');
              const fireApiUrl = 'https://eyeonthefire.com/api/nasa/'; // Ensure this endpoint is correct

              fetchWithRetry(fireApiUrl)
                  .then(data => {
                      const fireList = (data.events || []).map(event => ({
                          lat: event.geometry[0].coordinates[1],
                          lon: event.geometry[0].coordinates[0],
                          title: event.title || 'Active Fire'
                      }));
                      setFires(fireList.slice(0, 200));
                  })
                  .catch(err => {
                      console.error('Error fetching fire data:', err.message);
                      setErrorMessage(`Failed to load fire data. Check API or network connection.`);
                  })
                  .finally(() => {
                       setIsLoading(false);
                       if (loadingOverlayRef.current) loadingOverlayRef.current.classList.add('hidden');
                  });
          }, []);


          useEffect(() => {
              if (markerLayerRef.current) {
                  markerLayerRef.current.clearLayers();
                  const fireIcon = L.icon({
                      iconUrl: '/images/fire-icon.png', // Use root-relative path
                      iconSize: [32, 32], iconAnchor: [16, 32], popupAnchor: [0, -32]
                  });

                  fires.forEach(fire => {
                      L.marker([fire.lat, fire.lon], { icon: fireIcon })
                          .bindPopup(fire.title)
                          .addTo(markerLayerRef.current);
                  });
              }
          }, [fires]);

          const handleReset = () => { setCenter(initialCenter); setZoom(initialZoom); setErrorMessage(''); };

          const handleLocateMe = () => {
               setIsLoading(true); setErrorMessage('');
               if (loadingOverlayRef.current) loadingOverlayRef.current.classList.remove('hidden');
               if (navigator.geolocation) {
                  navigator.geolocation.getCurrentPosition(
                      position => {
                          const { latitude, longitude } = position.coords;
                          setCenter([latitude, longitude]); setZoom(10);
                          setIsLoading(false);
                          if (loadingOverlayRef.current) loadingOverlayRef.current.classList.add('hidden');
                      },
                      err => {
                          console.error('Geolocation error:', err.message);
                          setErrorMessage('Could not get your location: ' + err.message);
                          setIsLoading(false);
                          if (loadingOverlayRef.current) loadingOverlayRef.current.classList.add('hidden');
                      },
                       { enableHighAccuracy: true, timeout: 8000, maximumAge: 0 }
                  );
              } else {
                  setErrorMessage('Geolocation is not supported by this browser.');
                  setIsLoading(false);
                  if (loadingOverlayRef.current) loadingOverlayRef.current.classList.add('hidden');
              }
          };

          const dismissError = () => setErrorMessage('');

          // Render structure for React map component
          return (
              <>
                  <div className="map-container">
                       <div ref={loadingOverlayRef} className="loading-overlay">
                           <div className="flame-loader"></div>
                           <p>Loading live fire data...</p>
                       </div>
                      <div className="controls">
                          <button onClick={handleReset} title="Reset Map View to US">Reset View</button>
                          <button onClick={handleLocateMe} title="Center Map on My Location">Locate Me</button>
                      </div>
                      {errorMessage && (
                          <div className="error-message">
                              <span>{errorMessage}</span>
                              <button onClick={dismissError} aria-label="Dismiss error">×</button>
                          </div>
                      )}
                      {/* The div the Leaflet map will attach to */}
                      <div id="map" style={{height: '70vh', borderRadius: '5px'}}></div>
                  </div>
              </>
          );
      };

      ReactDOM.render(<MapComponent />, document.getElementById('root'));
    </script>

    {/* Navigation JS */}
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('#main-nav'); // Correct target
            const mainNavLinks = document.querySelectorAll('.main-menu a');

            if (hamburger && navMenu) {
                 hamburger.addEventListener('click', () => {
                    const isActive = navMenu.classList.contains('active');
                    hamburger.classList.toggle('active');
                    navMenu.classList.toggle('active');
                    hamburger.setAttribute('aria-expanded', !isActive);

                    if (!navMenu.classList.contains('active')) {
                        document.querySelectorAll('.main-menu .has-dropdown.open').forEach(openDropdown => {
                            openDropdown.classList.remove('open');
                            const caret = openDropdown.querySelector('a > i.fa-caret-down');
                            if(caret) caret.style.transform = '';
                        });
                    }
                 });
            }

             if (navMenu) {
                 const dropdownToggles = navMenu.querySelectorAll('.main-menu .has-dropdown > a');
                 dropdownToggles.forEach(toggleLink => {
                     toggleLink.addEventListener('click', (e) => {
                         if (hamburger && window.getComputedStyle(hamburger).display !== 'none') {
                             e.preventDefault();
                             const parentLi = toggleLink.closest('.has-dropdown');
                             if (parentLi) {
                                const currentlyOpen = parentLi.classList.contains('open');
                                document.querySelectorAll('.main-menu .has-dropdown.open').forEach(otherLi => {
                                     if (otherLi !== parentLi) {
                                         otherLi.classList.remove('open');
                                          const otherCaret = otherLi.querySelector('a > i.fa-caret-down');
                                          if(otherCaret) otherCaret.style.transform = '';
                                     }
                                 });
                                parentLi.classList.toggle('open', !currentlyOpen);
                                const caret = toggleLink.querySelector('i.fa-caret-down');
                                if (caret) {
                                    caret.style.transform = parentLi.classList.contains('open') ? 'rotate(180deg)' : '';
                                }
                             }
                         }
                         else if (!toggleLink.getAttribute('href') || toggleLink.getAttribute('href') === '#') {
                             e.preventDefault();
                         }
                     });
                 });

                 mainNavLinks.forEach(link => {
                    const isToggle = link.matches('.has-dropdown > a');
                    const isInDropdown = link.closest('.dropdown') !== null;

                    if (!isToggle || (isInDropdown && hamburger && navMenu.classList.contains('active'))) {
                         link.addEventListener('click', (e) => {
                             const href = link.getAttribute('href');
                             let isExternal = false;
                             try { isExternal = new URL(href, window.location.origin).origin !== window.location.origin; }
                             catch (_) { /* ignore */ }

                             if (hamburger && navMenu.classList.contains('active') && (!href || href === '#' || (href.startsWith('#') && !isExternal))) {
                                hamburger.classList.remove('active');
                                navMenu.classList.remove('active');
                                hamburger.setAttribute('aria-expanded', 'false');
                                document.querySelectorAll('.main-menu .has-dropdown.open').forEach(openDropdown => {
                                    openDropdown.classList.remove('open');
                                    const caret = openDropdown.querySelector('a > i.fa-caret-down');
                                    if(caret) caret.style.transform = '';
                                });
                             }
                         });
                     }
                 });
             }

            const yearSpan = document.getElementById('year');
            if (yearSpan) {
                 yearSpan.textContent = new Date().getFullYear();
            }
        });
    </script>

</body>
</html>
